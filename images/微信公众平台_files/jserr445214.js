"use strict"
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BJ_REPORT=function(e){if(e.BJ_REPORT)return e.BJ_REPORT
var n=[],i={uin:0,url:"https://badjs.weixinbridge.com/badjs",combo:0,level:4,ignore:[],random:1,delay:0,submit:null},t=function(e,n){return Object.prototype.toString.call(e)==="[object "+(n||"Object")+"]"},r=function(e){return"object"===(void 0===e?"undefined":_typeof(e))&&!!e},o=function(e){return null===e||!t(e,"Number")&&!e},c=function(e){try{if(e.stack){var n=e.stack.match("https?://[^\n]+"),i=(n=n?n[0]:"").match(":(\\d+):(\\d+)")
i||(i=[0,0,0])
var t=a(e).replace(/https?\:\/\/.*?\.js\:/g,"")
return 0==function(e,n){return!(e.indexOf("TypeError: #<KeyboardEvent> is not a function")>-1||e.indexOf("TypeError: #<MouseEvent> is not a function")>-1||e.indexOf("ReferenceError: LIST_INFO is not defined")>-1||e.indexOf("TypeError: e is not a constructor")>-1||location&&/token=\d+/.test(location.href)&&"0"==wx.uin||/Mozilla\/5.0.*ipad.*BaiduHD/i.test(n)&&e.indexOf("ReferenceError: Can't find variable: bds")>-1||/Linux; U; Android.*letv/i.test(n)&&e.indexOf("ReferenceError: diableNightMode is not defined")>-1)}(t,window.navigator.userAgent)?null:{msg:t,rowNum:i[1],colNum:i[2],target:n.replace(i[0],"")}}return e}catch(n){return e}},a=function(e){var n=e.stack.replace(/\n/gi,"").split(/\bat\b/).slice(0,5).join("@").replace(/\?[^:]+/gi,""),i=e.toString()
return n.indexOf(i)<0&&(n=i+"@"+n),n},g=function(e,n){var t=[],c=[],a=[]
if(r(e)){e.level=e.level||i.level
for(var g in e){var s=e[g]
if(!o(s)){if(r(s))try{s=JSON.stringify(s)}catch(e){s="[BJ_REPORT detect value stringify error] "+e.toString()}a.push(g+":"+s),t.push(g+"="+encodeURIComponent(s)),c.push(g+"["+n+"]="+encodeURIComponent(s))}}}return[c.join("&"),a.join(","),t.join("&")]},s=[],d=[],u=function(e){var n=e.replace(/\&_t=\d*/,"")
for(var t in d)if(d[t]==n)return
if(d.push(n),i.submit)i.submit(e)
else{var r=new Image
s.push(r),r.src=e}var o="error"
if((o=e.match(/msg=(.*?)&/))&&o[1]&&(o=o[1]),wx&&wx.uin&&(o+=encodeURIComponent("|uin|"+wx.uin)),i.key){(r=new Image).src="/misc/jslog?id="+i.key+"&content="+o+"&level=error"}(new Image).src="/misc/jslog?id=65&content="+o+"&level=error"},m=[],f=0,l=function(e){if(i.report){for(;n.length;){var r=!1,o=n.shift(),c=g(o,m.length)
if(t(i.ignore,"Array"))for(var a=0,s=i.ignore.length;a<s;a++){var d=i.ignore[a]
if(t(d,"RegExp")&&d.test(c[1])||t(d,"Function")&&d(o,c[1])){r=!0
break}}r||(i.combo?m.push(c[0]):u(i.report+c[2]+"&_t="+ +new Date),i.onReport&&i.onReport(i.id,o))}var l=m.length
if(l){var p=function(){clearTimeout(f),console.log("comboReport"+m.join("&")),u(i.report+m.join("&")+"&count="+l+"&_t="+ +new Date),f=0,m=[]}
e?p():f||(f=setTimeout(p,i.delay,!0),console.log("_config.delay"+i.delay))}}},p={KEY:67,IDS:{DEFAULT:"5",MASS:"6",SELF_MENU:"7",LINK:"11",AUTO_REPLY:"12",COMMENT:"13",VOTE:"14",KF:"15",REWARD:"16",COPYRIGHT:"17",MSG:"18",USER:"19",LIST:"20",AUDIO:"21",VEDIO:"22",APPMSG:"4",AD:"23",ANALYSIS:"24",SETTING:"25",VERIFY:"26",SAFE:"27",ILLEGAL:"28",ADVANCED:"29",REGISTER:"30",TMPL:"31",IE:"32",CARD:"33",SHOP:"34",TMPLMSG:"35",HOME:"36",Android:"37",IOS:"38",IBEACON:"72",MERCHANT:"82"},destory:function(){l=function(){}},push:function(e,t){if(Math.random()>=i.random)return p
var o
if(r(e)){if(o=c(e),t&&(o.msg+="["+t+"]"),o){if(o.target&&0==/^https?\:\/\/(mp\.weixin\.qq\.com|res\.wx\.qq\.com)/.test(o.target))return p
n.push(o)}}else t&&(e+="["+t+"]"),n.push({msg:e})
return l(),p},report:function(e,n){return e&&p.push(e,n),p},info:function(e){return e?(r(e)?e.level=2:e={msg:e,level:2},p.push(e),p):p},debug:function(e){return e?(r(e)?e.level=1:e={msg:e,level:1},p.push(e),p):p},init:function(e){for(var n in e)i[n]=e[n]
var t=parseInt(i.id,10)
n=parseInt(i.key,10)
return window.navigator.userAgent&&/;\s*MSIE\s*[8|7]\.0b?;/i.test(window.navigator.userAgent)?(t=p.IDS.IE,n=0):window.navigator.userAgent.indexOf("Android")>-1||window.navigator.userAgent.indexOf("Adr")>-1?(t=p.IDS.Android,n=0):window.navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&(t=p.IDS.IOS,n=0),t&&n&&(i.report=i.url+"?id="+t+"&key="+n+"&uin="+(wx&&wx.uin)+"&from="+encodeURIComponent(location.href)+"&"),p},monitor:function(e,n,t){if(n=n||"badjs|monitor",e){(new Image).src="/misc/jslog?id="+e+"&content="+encodeURIComponent(n)+"&level=error"}if(t){(new Image).src=i.url+"?id="+t+"&msg="+encodeURIComponent(n)+"&uin="+(wx&&wx.uin)+"&from="+encodeURIComponent(location.href)+"&level=4"}},getConfig:function(){return i}}
return"undefined"!=typeof console&&console.error&&setTimeout(function(){var e=((location.hash||"").match(/([#&])BJ_ERROR=([^&$]+)/)||[])[2]
e&&console.error("BJ_ERROR",decodeURIComponent(e).replace(/(:\d+:\d+)\s*/g,"$1\n"))},0,!0),i.id=p.IDS.DEFAULT,i.key=p.KEY,function(){if(i.id!=p.IDS.DEFAULT||i.key!=p.KEY)return{id:i.id,key:i.key}
var e={_href:location.href,href:location.href.replace("https://mp.weixin.qq.com/","")}
e.href.indexOf("?")>-1?e.cgi=e.href.match(/.*?\?/g)[0].slice(0,-1):e.cgi=e.href
var n=(e.href+"&").match(/action\=(.*?)&/)
n&&n[1]&&(e.action=n[1])
var t=p.IDS.DEFAULT,r=p.KEY
"cgi-bin/masssendpage"==e.cgi?(t=p.IDS.MASS,r=66):"advanced/autoreply"==e.cgi?(t=p.IDS.AUTO_REPLY,r=70):"advanced/selfmenu"==e.cgi?(t=p.IDS.SELF_MENU,r=68):"misc/appmsgcomment"==e.cgi?(t=p.IDS.COMMENT,r=71):"cgi-bin/newoperatevote"==e.cgi?(t=p.IDS.VOTE,r=72):"misc/kf"==e.cgi?(t=p.IDS.KF,r=73):"merchant/rewardstat"==e.cgi||"merchant/reward"==e.cgi?(t=p.IDS.REWARD,r=74):"cgi-bin/appmsgcopyright"==e.cgi||"cgi-bin/imgcopyright"==e.cgi||"cgi-bin/ori_video"==e.cgi?(t=p.IDS.COPYRIGHT,r=75):"cgi-bin/message"==e.cgi?(t=p.IDS.MSG,r=76):"cgi-bin/user_tag"==e.cgi?(t=p.IDS.USER,r=77):"cgi-bin/appmsg"==e.cgi&&("list_card"==e.action||"list"==e.action)||"cgi-bin/filepage"==e.cgi?(t=p.IDS.LIST,r=78):"cgi-bin/operate_voice"==e.cgi?(t=p.IDS.AUDIO,r=79):"cgi-bin/appmsg"==e.cgi&&"video_edit"==e.action?(t=p.IDS.VEDIO,r=80):"cgi-bin/appmsg"==e.cgi&&"edit"==e.action?(t=p.IDS.APPMSG,r=62):"cgi-bin/frame"==e.cgi&&/t=ad_system/.test(e.href)||/merchant\/ad_/.test(e.cgi)?(t=p.IDS.AD,r=81):"misc/useranalysis"==e.cgi||"misc/appmsganalysis"==e.cgi||"misc/menuanalysis"==e.cgi||"misc/messageanalysis"==e.cgi||"misc/interfaceanalysis"==e.cgi?(t=p.IDS.ANALYSIS,r=82):"cgi-bin/settingpage"==e.cgi||"acct/contractorinfo"==e.cgi?(t=p.IDS.SETTING,r=83):"merchant/store"==e.cgi||"merchant/order"==e.cgi||"acct/wxverify"==e.cgi?(t=p.IDS.VERIFY,r=84):"cgi-bin/safecenterstatus"==e.cgi?(t=p.IDS.SAFE,r=85):"cgi-bin/illegalrecord"==e.cgi?(t=p.IDS.ILLEGAL,r=86):"advanced/advanced"==e.cgi||"advanced/diagram"==e.cgi||"cgi-bin/frame"==e.cgi&&/t=advanced\/dev_tools_frame/.test(e.href)?(t=p.IDS.ADVANCED,r=87):"acct/contractorpage"==e.cgi?(t=p.IDS.REGISTER,r=88):"cgi-bin/readtemplate"==e.cgi?(t=p.IDS.TMPL,r=89):"advanced/tmplmsg"==e.cgi?(t=p.IDS.TMPLMSG,r=90):"merchant/entityshop"==e.cgi||"merchant/newentityshop"==e.cgi?(t=p.IDS.SHOP,r=92):"merchant/goods"==e.cgi||"merchant/goodsgroup"==e.cgi||"merchant/shelf"==e.cgi||"merchant/goodsimage"==e.cgi||"merchant/delivery"==e.cgi||"merchant/productorder"==e.cgi||"merchant/merchantstat"==e.cgi||"merchant/introduction"==e.cgi||"merchant/merchantpush"==e.cgi||"merchant/merchantentrance"==e.cgi?(t=p.IDS.MERCHANT,r=104):"cgi-bin/home"==e.cgi?(t=p.IDS.HOME,r=93):"merchant/cardapply"==e.cgi&&"listapply"==e.action?r=95:e.cgi.indexOf("beacon")>-1&&(t=p.IDS.IBEACON,r=96),i.id=t,i.key=r,wx&&"en_US"==wx.lang&&(t=125,r=125)}(),p.init(),p}(window)
