define("pages/modules/media_dialog/question_dialog/questionDialog4Web1.tpl.js",[],function(e,i,o){return'<mp-question-dialog v-if="$store.state.editor.plugins.insertquestion.dialog.isShow" @ok="selectQuestion" @cancel="selectQuestion"></mp-question-dialog>'})
define("pages/modules/media_dialog/link_dialog/linkDialog4Web1.js",["pages/modules/media_dialog/link_dialog/link_dialog.js"],function(i,n,a){"use strict"
function e(){return{title:"编辑超链接",isShow:!1,linkinfo:null,type:["innerlink","outerlink"],nickname:window.wx.commonData.data.nick_name,linkUrl:""}}i("pages/modules/media_dialog/link_dialog/link_dialog.js"),a.exports={getParmas:e,bindEvent:function(l){l.eventBus.$on("showLinkDialog",function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e()
for(var a in i)void 0!==n[a]&&(n[a]=i[a])
for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(l.params[o]=n[o])
l.params.isShow=!0})},close:function(i){i.eventBus.$emit("showLinkDialog_callback",i.data)}}})
define("pages/modules/media_dialog/link_dialog/link_dialog.js",["vue-weui/src/dialog/dialog.js","vue-weui/src/tab/tab.js","pages/modules/media_dialog/link_dialog/link_dialog.css.js","pages/modules/media_dialog/link_dialog/inner_link.js","pages/modules/media_dialog/link_dialog/outer_link.js","pages/modules/media_dialog/link_dialog/link_dialog.tpl.js","vue-weui/src/utils/object.js"],function(i,e,t){"use strict"
i("vue-weui/src/dialog/dialog.js"),i("vue-weui/src/tab/tab.js"),i("pages/modules/media_dialog/link_dialog/link_dialog.css.js"),i("pages/modules/media_dialog/link_dialog/inner_link.js"),i("pages/modules/media_dialog/link_dialog/outer_link.js")
var l=i("pages/modules/media_dialog/link_dialog/link_dialog.tpl.js"),n=i("vue-weui/src/utils/object.js").assign,a="innerlink"
Vue.component("mp-link-dialog",{template:l,props:{title:{type:String,default:"添加链接"},value:{type:Boolean,default:!1},linkinfo:{type:Object,default:null},type:{type:Array,default:function(){return[a,"outerlink"]}},nickname:{type:String,default:""},linkUrl:String},data:function(){var i={type:a,title:""}
this.linkinfo&&(i=n(i,this.linkinfo))
var e=!!this.linkinfo,t={innerlink:"公众号文章链接",outerlink:"外部链接"}
return{tabs:this.type.map(function(i){return{id:i,name:t[i]}}),selectedTab:this.linkinfo&&this.linkinfo.type?this.linkinfo.type:a,isEdit:e,dialogShow:!1,searchResult:i}},watch:{value:function(i){!0===i?this.show():this.hide()},dialogShow:function(i){this.$emit("input",i)}},mounted:function(){!0===this.value&&this.show()},methods:{show:function(){!0!==this.dialogShow&&(this.dialogShow=!0)},hide:function(){!1!==this.dialogShow&&(this.dialogShow=!1)},onDialogClose:function(){this.hide(),this.$emit("cancel")},onDialogOK:function(){var e=this
this.selectedTab===a?this.$refs.innerLink.getData().then(function(i){i.tab=e.selectedTab,e.$emit("select",i),e.hide()}):"outerlink"===this.selectedTab&&this.$refs.outerLink.getData().then(function(i){i.tab=e.selectedTab,e.$emit("select",i),e.hide()})},dialogCallback:function(){this.$emit("select",this.searchResult),this.hide()},changeTab:function(i){this.selectedTab=i}}})})
define("vue-weui/src/dialog/dialog.js",["vue-weui/src/dialog/dialog.css.js","vue-weui/src/dialog/dialog.tpl.js","vue-weui/src/mixins/emitter.js","vue-weui/src/utils/object.js"],function(e,t,i){"use strict"
e("vue-weui/src/dialog/dialog.css.js")
var s=e("vue-weui/src/dialog/dialog.tpl.js"),l=e("vue-weui/src/mixins/emitter.js"),n=e("vue-weui/src/utils/object.js").assign,o={name:"mp-dialog",template:s,mixins:[l],props:{value:{type:Boolean,default:!1},title:{type:String},closable:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!1},styles:{type:Object},confirmLoading:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},defaultFooter:{type:Boolean,default:!1},confirmText:{type:String,default:"确定"},cancelText:{type:String,default:"取消"},width:{type:Number,default:0},height:{type:Number,default:0},transfer:{type:Boolean,default:!0},wrapClass:{type:String},mask:{type:Boolean,default:!0}},beforeDestroy:function(){this.scrollable||(document.body.style.overflow="visible")},data:function(){return{visible:this.value}},watch:{value:function(e){this.visible=e},visible:function(e){!1===e?this.scrollable||(document.body.style.overflow="visible"):this.scrollable||(document.body.style.overflow="hidden"),this.$emit("visible-change",e)}},computed:{mainStyles:function(){var e={},t=parseInt(this.width,10),i=parseInt(this.height,10),s=0<t?{width:t<=100?t+"%":t+"px"}:{},l=0<i?{height:i+"px"}:{},o=this.styles?this.styles:{}
return n(e,s,l,o),e}},mounted:function(){document.addEventListener("keydown",this.EscClose)},methods:{close:function(){this.visible=!1,this.$emit("input",!1),this.$emit("close")},ok:function(){this.$emit("ok")},onClick:function(e){this.$emit("click",e)},EscClose:function(e){this.visible&&this.closable&&27===e.keyCode&&this.close()},handleMask:function(){this.maskClosable&&this.mask&&this.close()},handleWrapClick:function(e){var t=e.target.getAttribute("class")
t&&-1<t.indexOf("dialog__wrp")&&this.handleMask()}}}
!i.parent&&window.Vue?window.Vue.component(o.name,o):("function"==typeof o.template&&o.template(o),o.install=function(e){return e.component(o.name,o)}),i.exports=o,i.exports.default=o})
define("vue-weui/src/dialog/dialog.css.js", [], function (require, exports, module){module.exports = "/*How to usefont-family: 'wechatnum';*/.weui-desktop-mask {  position: fixed;  top: 0;  left: 0;  right: 0;  bottom: 0;  background-color: rgba(0, 0, 0, 0.5);  z-index: 1000;  cursor: default;  color: #FFFFFF;}.weui-desktop-mask a {  color: #FFFFFF;}.weui-desktop-mask_transparent {  background-color: rgba(255, 255, 255, 0);}.weui-desktop-mask_status {  position: absolute;  text-align: center;}.weui-desktop-mask_status:after {  content: \" \";  display: inline-block;  vertical-align: middle;  width: 0;  height: 100%;  overflow: hidden;}.weui-desktop-mask__msg {  display: inline-block;  vertical-align: middle;  max-width: 100%;}.weui-desktop-dialog__wrp {  z-index: 5000;  position: fixed;  top: 0;  bottom: 0;  left: 0;  right: 0;  text-align: center;  white-space: nowrap;  overflow: auto;}.weui-desktop-dialog__wrp:after {  content: \" \";  display: inline-block;  vertical-align: middle;  width: 0;  height: 100%;  overflow: hidden;}.weui-desktop-dialog {  display: inline-block;  text-align: left;  vertical-align: middle;  margin: 40px;  white-space: normal;  -webkit-border-radius: 4px;  border-radius: 4px;  background-color: #FFFFFF;  -webkit-box-shadow: 0 1px 20px 0 rgba(0, 0, 0, 0.1);  box-shadow: 0 1px 20px 0 rgba(0, 0, 0, 0.1);  max-width: 980px;  min-width: 600px;  box-sizing: border-box;}.weui-desktop-dialog__hd {  position: relative;  overflow: hidden;  padding: 0 32px;  line-height: 72px;  height: 72px;}.weui-desktop-dialog__title {  font-weight: 400;  font-size: 16px;}.weui-desktop-dialog__close-btn {  position: absolute;  right: 32px;  top: 50%;  margin-top: -9px;  width: 18px;  height: 18px;  line-height: 18px;  overflow: hidden;}.weui-desktop-dialog__ft {  padding: 24px 32px;  text-align: center;}.weui-desktop-dialog__ft > .weui-desktop-btn {  margin: 0 .5em;}.weui-desktop-dialog_simple .weui-desktop-dialog__bd {  padding: 66px 45px 108px;}.weui-desktop-dialog_agreement .weui-desktop-dialog__bd {  padding: 48px 45px 16px;}.weui-desktop-dialog__bd > .weui-desktop-tab_title:first-child .weui-desktop-tab__nav:first-child {  margin-left: 32px;}.weui-desktop-dialog__bd .weui-desktop-tab_dialog .weui-desktop-tab__nav:first-child {  margin-left: 32px;}.fade-enter-active,.fade-leave-active {  transition: all 0.2s ease;}.fade-enter,.fade-leave-active {  opacity: 0;}";});define("vue-weui/src/dialog/dialog.tpl.js",[],function(i,t,e){return'<div @click="onClick">  <transition name="fade">      <div v-show="visible" :class="[\'weui-desktop-dialog__wrp\', wrapClass]" @click="handleWrapClick" ref="main">        <div class="weui-desktop-dialog" :style="mainStyles">          <div class="weui-desktop-dialog__hd">            <h3 class="weui-desktop-dialog__title"><slot name="header">{{title}}</slot></h3>            <button v-if="closable" @click.prevent="close" class="weui-desktop-icon-btn weui-desktop-dialog__close-btn">              <svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="M10.01 8.996l7.922-7.922c.086-.086.085-.21.008-.289l-.73-.73c-.075-.074-.208-.075-.29.007L9 7.984 1.077.062C.995-.02.863-.019.788.055l-.73.73c-.078.078-.079.203.007.29l7.922 7.92-7.922 7.922c-.086.086-.085.212-.007.29l.73.73c.075.074.207.074.29-.008l7.92-7.921 7.922 7.921c.082.082.215.082.29.008l.73-.73c.077-.078.078-.204-.008-.29l-7.921-7.921z"/></svg>            </button>          </div>          <div class="weui-desktop-dialog__bd">            <slot ref="body"></slot>          </div>          <div class="weui-desktop-dialog__ft">            <slot name="footer">              <template v-if="defaultFooter">                <button class="weui-desktop-btn weui-desktop-btn_primary" @click="ok">{{confirmText}}</button>                <button class="weui-desktop-btn weui-desktop-btn_default" @click="close">{{cancelText}}</button>              </template>            </slot>          </div>        </div>      </div>  </transition>  <transition name="fade">      <div v-show="mask && visible" class="weui-desktop-mask" @click="handleMask"></div>  </transition></div>'})
define("vue-weui/src/tab/tab.js",["vue-weui/src/tab/tab.css.js","vue-weui/src/tab/tab.tpl.js","vue-weui/src/tab/common.js"],function(t,e,i){"use strict"
t("vue-weui/src/tab/tab.css.js")
var s=t("vue-weui/src/tab/tab.tpl.js"),a=t("vue-weui/src/tab/common.js").findDownComponent,n={name:"mp-tab",template:s,model:{prop:"tabs",event:"tabs-change"},props:{tabs:{type:Array,required:!1},selected:{type:[String,Number],default:""},type:{type:String,default:"normal",validator:function(t){return-1<["normal","section","simple"].indexOf(t)}}},mounted:function(){(!this.tabs||Array.isArray(this.tabs)&&0===this.tabs.length)&&this._mapPropsChildren()},data:function(){return{active:this.selected}},watch:{selected:function(t){this.active=t,(!this.tabs||Array.isArray(this.tabs)&&0===this.tabs.length)&&this._mapPropsChildren()},active:function(){(!this.tabs||Array.isArray(this.tabs)&&0===this.tabs.length)&&this._mapPropsChildren()}},methods:{onClick:function(t,e){this.active=t,this.$emit("click",t,e)},childClick:function(t,e){this.active=t.id,this.$emit("click",t,e)},_mapPropsChildren:function(){if(this.childs=a(this,"mp-tab-item"),this.childs){var e=this.active
this.childs.forEach(function(t){t.currentActive=e})}}}}
!i.parent&&window.Vue?window.Vue.component(n.name,n):("function"==typeof n.template&&n.template(n),n.install=function(t){return t.component(n.name,n)}),i.exports=n,i.exports.default=n})
define("vue-weui/src/tab/tab.css.js", [], function (require, exports, module){module.exports = "/*How to usefont-family: 'wechatnum';*/.weui-desktop-tab__navs {  text-align: center;  line-height: 30px;  font-size: 14px;}.weui-desktop-tab__navs:after {  content: \"\\200B\";  display: block;  height: 0;  clear: both;}.weui-desktop-tab__navs:after {  content: \"\";}.weui-desktop-tab__nav {  position: relative;  float: left;  margin-right: 24px;}.weui-desktop-tab__nav a {  display: block;  text-decoration: none;  color: #9A9A9A;}.weui-desktop-tab__nav_current a {  color: #353535;}.weui-desktop-tab_title .weui-desktop-tab__navs {  text-align: left;  line-height: 40px;  border-bottom: 1px solid #E0E1E2;  font-size: 16px;}.weui-desktop-tab_title .weui-desktop-tab__nav {  margin-bottom: -1px;}.weui-desktop-tab_title .weui-desktop-tab__nav:hover a {  color: #44B549;}.weui-desktop-tab_title .weui-desktop-tab__nav a {  color: #353535;  overflow: hidden;  text-overflow: ellipsis;  display: -webkit-box;  -webkit-box-orient: vertical;  -webkit-line-clamp: 1;  max-width: 120px;}.weui-desktop-tab_title .weui-desktop-tab__nav_current {  border-bottom: 2px solid #44B549;}.weui-desktop-tab_title .weui-desktop-tab__nav_current a {  color: #44B549;}.weui-desktop-tab_section .weui-desktop-tab__nav {  border: 1px solid #C9CACE;  margin-right: -1px;}.weui-desktop-tab_section .weui-desktop-tab__nav a {  padding: 0 22px;  min-width: 54px;}.weui-desktop-tab_section .weui-desktop-tab__nav:first-child {  border-top-left-radius: 3px;  border-bottom-left-radius: 3px;}.weui-desktop-tab_section .weui-desktop-tab__nav:last-child {  border-top-right-radius: 3px;  border-bottom-right-radius: 3px;  margin-right: 0;}.weui-desktop-tab_section .weui-desktop-tab__nav_current {  background-color: #44B549;  border-color: #44B549;  position: relative;}.weui-desktop-tab_section .weui-desktop-tab__nav_current a {  color: #FFFFFF;}";});define("vue-weui/src/tab/tab.tpl.js",[],function(t,e,i){return'<div class="weui-desktop-tab"  :class="{    \'weui-desktop-tab_title\': type === \'normal\',    \'weui-desktop-tab_section\': type === \'section\'  }">  <ul class="weui-desktop-tab__navs">    <li v-for="(item, index) in tabs"      v-if="typeof item.show === \'undefined\' ? true : !!item.show"      class="weui-desktop-tab__nav"      :class="{        \'weui-desktop-tab__nav_current\': item.id === active      }"      @click="onClick(item.id, index)"    >      <a :href="item.url || \'javascript:void(0);\'" :target="item.target || \'\'">        {{item.name}}      </a>    </li>    <slot></slot>  </ul></div>'})
define("vue-weui/src/tab/common.js",[],function(n,e,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.findUpComponent=function(n,e,o){o="string"==typeof e?[e]:e
var t=n.$parent,r=t.$options.name
for(;t&&(!r||o.indexOf(r)<0);)(t=t.$parent)&&(r=t.$options.name)
return t},e.findDownComponent=function t(n,r){return n.$children.reduce(function(n,e){e.$options.name===r&&n.push(e)
var o=t(e,r)
return n.concat(o)},[])}})
define("pages/modules/media_dialog/link_dialog/link_dialog.css.js", [], function (require, exports, module){module.exports = "/*How to usefont-family: 'wechatnum';*/.weui-desktop-search__wrp {  display: block;  width: auto;}.weui-desktop-search__panel {  background: #FFFFFF;  box-shadow: 0 1px 20px 0 rgba(0, 0, 0, 0.1);  border-radius: 2px;  overflow: auto;  max-height: 200px;}.weui-desktop-search__loadmore {  padding: 20px;  text-align: center;}.weui-desktop-search__loadmore .weui-desktop-loading {  width: 32px;  height: 32px;}.weui-desktop-link-dialog .weui-desktop-media__list-wrp + .weui-desktop-pagination {  padding-bottom: 0;}.link_dialog_panel {  padding: 40px 40px 0;  height: 454px;  overflow-y: auto;  box-sizing: border-box;}.link_dialog_panel .weui-desktop-form__label {  width: 4.1em;}.link_dialog_panel .weui-desktop-form__control-group:last-child {  margin-bottom: 0;}.inner_link_account_item {  padding: 12px;  cursor: pointer;  color: #9A9A9A;}.inner_link_account_avatar {  width: 36px;  height: 36px;  vertical-align: middle;  -webkit-border-radius: 50px;  border-radius: 50px;}.inner_link_account_nickname {  font-weight: 400;  margin-left: 1em;  display: inline-block;  color: #353535;  vertical-align: middle;  max-width: 8em;  width: auto;  overflow: hidden;  text-overflow: ellipsis;  white-space: nowrap;  word-wrap: normal;}.inner_link_account_wechat {  font-style: normal;  margin-left: 1em;  display: inline-block;  vertical-align: middle;  max-width: 12em;  width: auto;  overflow: hidden;  text-overflow: ellipsis;  white-space: nowrap;  word-wrap: normal;}.inner_link_account_msg .weui-desktop-link-btn {  vertical-align: baseline;  margin-left: 1em;}.inner_link_article_area .weui-desktop-media__list-wrp {  max-height: none;  margin-top: 10px;}.inner_link_article_area .weui-desktop-media-tips {  padding: 20px;  box-sizing: border-box;}.inner_link_article_item {  display: block;  border-bottom: 1px solid #E4E8EB;  padding: 10px;  cursor: pointer;  transition: background .3s;}.inner_link_article_item .weui-desktop-form__check-label {  margin-top: -4px;}.inner_link_article_item .weui-desktop-vm_default:first-child {  vertical-align: top;}.inner_link_article_item .weui-desktop-vm_default:last-child {  vertical-align: bottom;  opacity: 0;  visibility: hidden;  -webkit-transition: opacity .3s;  transition: opacity .3s;}.inner_link_article_item:hover {  background-color: #F6F8F9;}.inner_link_article_item:hover .weui-desktop-vm_default:last-child {  opacity: 1;  visibility: visible;}.inner_link_article_item:last-child {  border-bottom: none;}.inner_link_article_title {  font-weight: 400;  overflow: hidden;  text-overflow: ellipsis;  display: -webkit-box;  -webkit-box-orient: vertical;  -webkit-line-clamp: 1;  color: #353535;}.inner_link_article_title em {  font-style: normal;  color: #44B549;}.inner_link_article_date {  color: #9A9A9A;}";});define("pages/modules/media_dialog/link_dialog/inner_link.js",["vue-weui/src/form/form.js","vue-weui/src/form/form-item.js","vue-weui/src/input/input.js","vue-weui/src/button/button.js","vue-weui/src/popover/popover.js","vue-weui/src/radio/radio.js","vue-weui/src/radio/radio_group.js","vue-weui/src/search/search.js","pages/modules/media_dialog/link_dialog/inner_link.tpl.js","pages/modules/utils/cgi.js","pages/modules/utils/string.js","vue-weui/src/utils/time.js"],function(e,i,t){"use strict"
var s=function(e,i){if(Array.isArray(e))return e
if(Symbol.iterator in Object(e))return function(e,i){var t=[],s=!0,r=!1,a=void 0
try{for(var n,h=e[Symbol.iterator]();!(s=(n=h.next()).done)&&(t.push(n.value),!i||t.length!==i);s=!0);}catch(e){r=!0,a=e}finally{try{!s&&h.return&&h.return()}finally{if(r)throw a}}return t}(e,i)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}
e("vue-weui/src/form/form.js"),e("vue-weui/src/form/form-item.js"),e("vue-weui/src/input/input.js"),e("vue-weui/src/button/button.js"),e("vue-weui/src/popover/popover.js"),e("vue-weui/src/radio/radio.js"),e("vue-weui/src/radio/radio_group.js"),e("vue-weui/src/search/search.js")
var r=e("pages/modules/media_dialog/link_dialog/inner_link.tpl.js"),a=e("pages/modules/utils/cgi.js"),n=e("pages/modules/utils/string.js"),h=e("vue-weui/src/utils/time.js").formatDate
Vue.component("mp-inner-link",{template:r,props:{nickname:{type:String,default:""},linkTitle:{type:String,default:""},linkUrl:String},data:function(){return{linkTitleRule:{required:!0,message:"请输入链接标题",trigger:"none"},linkUrlRule:[{validator:function(e,i,t){return i?/http(s)?:\/\/mp\.weixin\.qq\.com\/(s\?|s\/|mp\/appmsg\/show\?)/.test(i)||/http(s)?:\/\/mp\.weixin\.qq\.com\/mp\/qa\?/.test(i)||/http(s)?:\/\/mp\.weixin\.qq\.com\/mp\/homepage\?/.test(i)?/^https?\:\/\/mp\.weixin\.qq\.com\/.*[\?&]tempkey=/.test(i)?t(new Error("不支持插入公众号文章的预览链接，请输入正式链接")):t():t(new Error("请输入公众号相关链接，并以http://或https://开头")):t(new Error("链接地址不能为空，请输入以http://或https://开头的地址"))},trigger:"none"}],innerLinkRules:{},innerLinkModel:{linkTitle:this.linkTitle,type:"search",linkUrl:this.linkUrl||""},innerLinkPlaceholder:"如不填写会默认填入选取文章的标题",defaultBizAvatar:"https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0?wx_fmt=png",disabledInput:0<this.linkTitle.length,chooseMsgAid:null,chooseMsgData:null,bizSearchNameFakeId:"",bizSearchName:this.nickname,bizSearchCountPerPage:5,bizSearchLoading:!0,bizSearchResult:[],bizSearchCurrentPage:1,bizSearchStatus:"normal",selectSearchBiz:!0,showBizSearchResult:!1,msgSearchName:"",msgSearchCountPerPage:5,msgSearchTotal:0,msgSearchLoading:!1,msgSearchResult:[],msgSearchCurrentPage:1,showMsgSearchResult:!1,showOprIdx:null,searchingBiz:!1,timeLimit:0,searchLoadingData:!1,canBizSearch:!0}},watch:{},mounted:function(){this.searchMsg()},methods:{searchBiz:function(){1e3<Date.now()-this.timeLimit&&this.bizSearchName.length&&(this.msgSearchName="",this.timeLimit=Date.now(),this.showBizSearchResult=!0,this.canBizSearch=!0,this.bizSearchResult=[],this.bizPageChange({currentPage:1}))},bizPageChange:function(e){var t=this,i=e.currentPage
this.canBizSearch&&(this.bizSearchLoading=!0,this.searchLoadingData=!0,this.bizSearchCurrentPage=i,a.get({url:"/cgi-bin/searchbiz?action=search_biz&begin="+(i-1)*this.bizSearchCountPerPage+"&count="+this.bizSearchCountPerPage+"&query="+encodeURIComponent(this.bizSearchName)},function(e){if(t.searchLoadingData=!1,e&&e.base_resp&&0===e.base_resp.ret){var i=e.total
t.bizSearchResult=t.bizSearchResult.concat(e.list),0===i&&(t.bizSearchLoading=!1,t.canBizSearch=!1),0===t.bizSearchResult.length&&(t.showBizSearchResult=!1,t.bizSearchStatus="warn"),i<=5&&(t.bizSearchLoading=!1)}else t.$tipsErr("系统错误，请稍后重试")}))},searchMsg:function(){this.chooseMsgData=null,this.chooseMsgAid=null,this.showMsgSearchResult=!0,this.msgPageChange({currentPage:1})},msgPageChange:function(e){var i=this,t=e.currentPage
console.log(t),this.msgSearchLoading=!0,this.msgSearchCurrentPage=t,a.get({url:"/cgi-bin/appmsg?action=list_ex&begin="+(t-1)*this.msgSearchCountPerPage+"&count="+this.msgSearchCountPerPage+"&fakeid="+this.bizSearchNameFakeId+"&type=9&query="+encodeURIComponent(this.msgSearchName)},function(e){i.msgSearchLoading=!1,e&&e.base_resp&&0===e.base_resp.ret?(i.msgSearchTotal=e.app_msg_cnt,i.msgSearchResult=e.app_msg_list.map(function(e){return e.title=n.htmlDecode(e.title.replace(/<\/?a[^>]*?>/gi,"")),e})):i.$tipsErr("系统错误，请稍后重试")})},clearBizSearch:function(){this.showBizSearchResult=!1,this.bizSearchName="",this.canBizSearch=!0,this.bizSearchLoading=!1,this.searchLoadingData=!1,this.bizSearchResult=[],this.bizSearchCurrentPage=1},clearMsgSearch:function(){this.showMsgSearchResult=!1,this.msgSearchName="",this.msgSearchTotal=0,this.msgSearchLoading=!1,this.msgSearchResult=[],this.msgSearchCurrentPage=1,this.chooseMsgAid=null,this.searchMsg()},chooseBiz:function(e){console.log(e),this.bizSearchName=this.bizSearchResult[e].nickname,this.bizSearchNameFakeId=this.bizSearchResult[e].fakeid,this.showBizSearchResult=!1,this.searchingBiz=!1,this.searchMsg()},chooseMsg:function(e,i){s(i,1)[0]&&(this.chooseMsgData=this.msgSearchResult[e],console.log(this.chooseMsgData))},showMsgOpr:function(e){this.showOprIdx=e},hideMsgOpr:function(){this.showOprIdx=null},gotoSearchBiz:function(){this.bizSearchName="",this.searchingBiz=!0,this.chooseMsgData=null},onBizSearchScroll:function(e){var i=e.target
i.scrollTop+i.clientHeight+70>i.scrollHeight&&!this.searchLoadingData&&this.bizPageChange({currentPage:this.bizSearchCurrentPage+1})},getData:function(){var s=this
return new Promise(function(t){s.$refs.innerLinkForm.validate(function(e){if(e){if("search"===s.innerLinkModel.type&&!s.chooseMsgData)return s.$tipsErr("请选择公众号文章"),!1
var i={target:"_blank",href:"",textValue:s.innerLinkModel.linkTitle}
"url"===s.innerLinkModel.type?i.href=s.innerLinkModel.linkUrl:"search"===s.innerLinkModel.type&&(i.href=s.chooseMsgData.link,i["data-itemshowtype"]=s.chooseMsgData.item_show_type,i.textValue.length||(i.textValue=s.chooseMsgData.title)),t(i)}return!1})})},searchInput:function(e){this.bizSearchStatus="normal",0===e.length&&(this.showBizSearchResult=!1,this.bizSearchResult=[])},msgSearchInput:function(e){0===e.length&&(this.showMsgSearchResult=!1,this.msgSearchName="",this.msgSearchTotal=0,this.msgSearchLoading=!1,this.msgSearchResult=[],this.msgSearchCurrentPage=1,this.chooseMsgAid=null,this.searchMsg())},innerLinkTypeChange:function(e){var i=this
"url"===e?(this.innerLinkRules={linkTitle:this.linkTitleRule,linkUrl:this.linkUrlRule},this.innerLinkPlaceholder="请输入链接标题"):"search"===e&&(this.innerLinkRules={},this.innerLinkPlaceholder="如不填写会默认填入选取文章的标题",window.setTimeout(function(){i.$refs.innerLinkForm.validate()},0))}},filters:{formatDate:function(e){return h(e,"YYYY-MM-DD")}}})})
define("vue-weui/src/form/form.js",["vue-weui/src/form/form.tpl.js"],function(e,t,i){"use strict"
var n={name:"mp-form",template:e("vue-weui/src/form/form.tpl.js"),props:{model:{type:Object},rules:{type:Object},labelWidth:{type:Number},labelPosition:{type:String,default:"left"},showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0}},provide:function(){return{form:this}},data:function(){return{fields:[]}},methods:{resetFields:function(){this.fields.forEach(function(e){e.resetField()})},validate:function(o){var a=this
return new Promise(function(i){var n=!0,r=0,l=[]
a.fields.forEach(function(t){t.validate("",function(e){e&&(n=!1,l.push(t)),++r===a.fields.length&&(i(n,l),"function"==typeof o&&o(n,l))})})})},validateField:function(t,e,i){var n=this.fields.filter(function(e){return e.prop===t})[0]
if(!n)throw new Error("[weui warn]: must call validateField with valid prop string!")
i?n.validate(i,e):n.validate("",e)}},watch:{rules:function(){this.validateOnRuleChange&&this.validate()}},created:function(){var t=this,a=this
this.$on("mp-form-item-add",function(e){return e&&t.fields.push(e),!1}),this.$on("mp-form-item-remove",function(e){return e.prop&&t.fields.splice(t.fields.indexOf(e),1),!1}),this.oldFields=Object.create(null),this.APIs=Object.create(null,{getFields:{value:function(){var i=Object.create(null)
return Object.keys(a.oldFields).forEach(function(t){var e=Array.isArray(a.oldFields[t])?a.oldFields[t]:[]
i[t]=[],e.forEach(function(e){e.EmitterAPIs?i[t].push(e.EmitterAPIs.getValue()):e.APIs&&e.APIs.getValue&&i[t].push(e.APIs.getValue())}),0===i[t].length?delete i[t]:1===i[t].length&&(i[t]=i[t][0])}),i}},registerField:{value:function(e,t){e&&(Array.isArray(a.oldFields[e])?a.oldFields[e].indexOf(t)<0&&a.oldFields[e].push(t):a.oldFields[e]=[t])}},deregisterField:{value:function(e,t){if(e)for(;;){var i=Array.isArray(a.oldFields[e])?a.oldFields[e].indexOf(t):-1
if(!(0<=i))break
a.oldFields[e].splice(i,1)}}},validate:{value:function(n,r){var l=Object.create(null),o=[]
Object.keys(a.oldFields).forEach(function(r){(Array.isArray(a.oldFields[r])?a.oldFields[r]:[]).forEach(function(e){if(e.APIs&&"function"==typeof e.APIs.validate){var i=void 0,n=void 0,t=new Promise(function(t){i=function(){t({status:"success",name:r})},n=function(e){t({status:"error",name:r,info:e})}})
e.APIs.validate(i,n),o.push(t)}})}),Promise.all(o).then(function(e){var t=a.APIs.getFields()
if(e.length!==o.length)r(Object.create(null),t),console.warn("mp-form promise error:",e)
else{var i=!1
e.forEach(function(e){"error"===e.status&&(i=!0,l[e.name]?Array.isArray(l[e.name])?l[e.name].push(e.info||{}):l[e.name]=[l[e.name],e.info||{}]:l[e.name]=e.info||{})}),i?r(l,t):n(t)}})}}})}}
!i.parent&&window.Vue?window.Vue.component(n.name,n):("function"==typeof n.template&&n.template(n),n.install=function(e){return e.component(n.name,n)}),i.exports=n,i.exports.default=n})
define("vue-weui/src/form/form.tpl.js",[],function(o,r,f){return"<form>  <slot></slot></form>"})
define("vue-weui/src/input/input.js",["vue-weui/src/input/input.css.js","vue-weui/src/input/input.tpl.js","vue-weui/src/icon/icon.js","vue-weui/src/mixins/emitter.js","vue-weui/src/input/validator.js","vue-weui/src/utils/object.js"],function(t,e,i){"use strict"
t("vue-weui/src/input/input.css.js")
var n=t("vue-weui/src/input/input.tpl.js"),a=t("vue-weui/src/icon/icon.js"),r=t("vue-weui/src/mixins/emitter.js"),u=t("vue-weui/src/input/validator.js"),l=t("vue-weui/src/utils/object.js"),s=l.isFunction,o=l.isString,h=l.isBoolean,f=l.isRepExp,d=l.hasOwn,c=l.assign,p={name:{type:String,default:""},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},placeholder:{type:String,default:""},autoFocus:{type:Boolean,default:!1},number:{type:Boolean,default:!1},maxlength:{type:Number,default:0},minlength:{type:Number,default:0},required:{type:Boolean,default:!1},type:{type:String,default:"text",validator:function(t){return-1<Object.keys(u).indexOf(t)}},validator:{type:Function},filter:{type:[Function,String]},countable:{type:Boolean,default:!1},counter:{type:Function,default:function(t){return(0<arguments.length&&void 0!==t?t:"").length}},clearable:{type:Boolean,default:!1},wrapClass:{type:String,default:""},status:{type:String,default:"normal",validator:function(t){return-1<["normal","warn"].indexOf(t)}},value:{type:[String,Number],default:""},defaultValue:{type:String,default:""},multi:{type:Boolean,default:!1},resize:{type:Boolean,default:!1}},m={name:"mp-input",inheritAttrs:!1,template:n,mixins:[r],props:p,components:{"mp-icon":a},data:function(){return{internalStatus:this.status,internalValue:this.value||this.defaultValue,isValidating:!1}},computed:{resizeStyle:function(){return this.resize?{}:{resize:"none"}},counterWording:function(){return this.counter(this.internalValue)+(this.maxlength?"/"+this.maxlength:"")},passedProps:function(){var e=c({},this.$attrs,this.$props)
return Object.keys(p).forEach(function(t){delete e[t]}),e},passedListeners:function(){var e=this,i=Object.create(null)
return this.$listeners&&Object.keys(this.$listeners).forEach(function(t){["validateError","validateOk","clear","input","blur"].indexOf(t)<0&&(i[t]=e.$listeners[t])}),i}},watch:{value:function(t){var e=void 0===t?this.defaultValue:t
this.setCurrentValue(e),this.$refs.field.focus(),this.$emit("input",e),this.validate("input"),this.dispatch("mp-form-item","mp-form-change",{value:this.internalValue})},status:function(t){this.internalStatus=t}},mounted:function(){this.autoFocus?this.$refs.field.focus():this.filterValue(this.internalValue)},methods:{handleInput:function(t){if(this.readonly||this.disabled)t.target.value=this.internalValue
else{var e=t.target.value
this.number&&""!==e&&!Number.isNaN(Number(e))&&(e=Number(e)),this.setCurrentValue(e),this.$emit("input",e),this.validate("input"),this.dispatch("mp-form-item","mp-form-change",{value:e})}},handleBlur:function(t){var e=t.target.value
this.filterValue(t.target.value),t.target.value=this.internalValue,e!==this.internalValue&&this.$emit("input",this.internalValue),this.$emit("blur",t),this.validate("blur"),this.dispatch("mp-form-item","mp-form-blur",{value:this.internalValue})},filterValue:function(t){s(this.filter)?this.setCurrentValue(this.filter(t)||this.defaultValue):o(this.filter)&&d(String.prototype,this.filter)&&this.setCurrentValue(t[this.filter]()||this.defaultValue),this.internalValue||this.setCurrentValue(this.defaultValue)},validate:function(t){var e=this
if(this.isValidating=!0,this.required&&!this.internalValue)return this.emitValidateError("required",t)
var i=this.counter(this.internalValue)
if(this.minlength&&i<this.minlength)return this.emitValidateError("minlength: "+this.minlength,t)
if(this.maxlength&&i>this.maxlength)return this.emitValidateError("maxlength: "+this.maxlength,t)
if(this.internalValue.length&&this.type&&u[this.type]){var n=u[this.type]
if("function"==typeof n&&!n(this.internalValue))return this.emitValidateError("type",t)
if(f(n)&&!n.test(this.internalValue))return this.emitValidateError("type",t)}if("input"===t)return this.emitValidateOk(t)
if("function"==typeof this.validator){var a=this.validator(this.internalValue,function(){return e.emitValidateOk("blur")},this.emitValidateError.bind(this))
if(h(a))return a?this.emitValidateOk("blur"):this.emitValidateError("custom validate error",t)}return!0},emitValidateOk:function(){return this.isValidating&&(this.internalStatus="normal",this.$emit("validate-ok"),this.isValidating=!1),!0},emitValidateError:function(t){var e=0<arguments.length&&void 0!==t?t:""
if(this.isValidating){this.internalStatus="warn"
var i={info:e,name:this.name,type:this.type,value:this.internalValue}
this.$emit("validate-error",i),this.isValidating=!1}return e},handleClear:function(){this.setCurrentValue(""),this.internalStatus="normal",this.$refs.field.focus(),this.$emit("clear"),this.dispatch("mp-form-item","mp-form-change",{value:""})},setCurrentValue:function(t){t!==this.internalValue&&(this.internalValue=t)}},created:function(){var n=this
this.isMounted=!1,this.APIs=Object.create(null,{getElement:{value:function(){return n.isMounted?n.$refs.field:null}},focus:{value:function(){return n.isMounted&&n.$refs.field.focus()}},blur:{value:function(){return n.isMounted&&n.$refs.field.blur()}},validate:{value:function(t,e){var i=n.validate("blur")
n.filterValue(n.internalValue),!0!==i?e({info:i||"",name:n.name,type:n.type,value:n.internalValue}):(n.emitValidateOk(),t())}}})}}
!i.parent&&window.Vue?window.Vue.component(m.name,m):("function"==typeof m.template&&m.template(m),m.install=function(t){return t.component(m.name,m)}),i.exports=m,i.exports.default=m})
